<?xml version="1.0" encoding="UTF-8"?>
<form name="WeaponsArmor" g="col" g-width="12" g-width-lg="12" height="25">
	<script> 
		<![CDATA[			
		local function askForDelete()
			Dialogs.confirmYesNo("Deseja realmente apagar essa perÃ­cia?",
								 function (confirmado)
									if confirmado then
										NDB.deleteNode(sheet)
									end
								 end)
		end

		]]>	
	</script>

	<layout g="col" g-width="10" height="25">
		<edit g="col" g-width="2" height="25" vertTextAlign="center" field="nome">
			<event name="onUserChange">
				local rcl = self:findControlByName("rclWeapons")
				if rcl~= nil then
					rcl:reorganize()
				end
			</event>
		</edit>
		<edit g="col" g-width="2" height="25" vertTextAlign="center" field="preco"/>
		<edit g="col" g-width="8" height="25" vertTextAlign="center" field="desc"/>
	</layout>

	<layout g="col" g-width="2" height="25">
		<edit g="col" g-width="4" height="25" vertTextAlign="center" field="dp"/>
		<edit g="col" g-width="4" height="25" vertTextAlign="center" field="rd"/>

		<button g="col" g-width="4" height="25" text="ðŸ—‘ï¸" onClick="askForDelete()" hint="Apagar" textTrimming="none"/>
	</layout>

	<!-- Calcule o bonus de pericia-->
	<dataLink fields="{'atributo', 'nivel'}">
		<event name="onUserChange">
			if sheet== nil then return end

			sheet.total = 	(tonumber(sheet.atributo) or 0) +
							(tonumber(sheet.nivel) or 0)
		</event>
	</dataLink>
</form>