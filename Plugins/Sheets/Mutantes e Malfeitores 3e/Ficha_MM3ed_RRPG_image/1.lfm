<?xml version="1.0" encoding="UTF-8"?>
<form name="frmFicha_MM3e_RRPG1_svg" align="client" theme="light" margins="{top=1}">
    <style>#frmFicha_MM3e_RRPG1_svg path {color: black; strokeColor: black; mode: stretch;} 
#frmFicha_MM3e_RRPG1_svg label {fontColor: black; textTrimming: none; wordWrap: false; autoSize: true;}</style>
    <scrollBox align="client">
        <rectangle width="893" height="1263" color="white">
            <image left="0" top="0" width="893" height="1263" src="images/Parede_1.png" style="stretch" optimize="true" />
            <layout left="257" top="28" width="180" height="242">
                <edit transparent="true" fontSize="12" fontColor="#000000" vertTextAlign="center" left="0" top="0" width="180" height="243" field="untitled52"/>
            </layout>
            <layout left="459" top="470" width="391" height="937">
                <richEdit left="0" top="0" width="391" height="687" field="PODERES" backgroundColor="#6cb098" showToolbar="false" defaultFontSize="16.5" defaultFontColor="black"/> <dataLink fields="{'PODERES'}" defaultValues="{'PODERES\n ✲ Nome do Poder ● custo final \n\n ✲ Nome do Poder ● custo final\n\n ✲ Nome do Poder ● custo final\n\n ✲ Nome do Poder ● custo final '}"/>
            </layout>
            <layout left="43" top="105" width="202" height="35">
                <edit transparent="true" fontSize="18" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="202" height="36" field="JOGADOR"/>
            </layout>
            <layout left="43" top="186" width="202" height="35" >
                <edit transparent="true" fontSize="18" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="202" height="36" field="IDENTIDADE"/>
            </layout>
            <layout left="44" top="285" width="257" height="40">
                <edit transparent="true" fontSize="22" fontColor="#000000" fontStyle="bold" horzTextAlign="center" left="0" top="0" width="257" height="40" field="CODINOME" />
            </layout>
            <layout left="381" top="291" width="51" height="53" >
                <edit transparent="true" fontSize="37.6" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="51" height="54" field="NP" />
            </layout>
			<layout left="315" top="279" width="52" height="16" hint="Afeta em -1 em todas as suas habilidades" >
				<checkBox left="0" top="0" text="HeroHigh" fontSize="8" fontColor="white" field="HeroHigh" />
			</layout>
            <layout left="377" top="360" width="61" height="33" >
                <edit transparent="true" fontSize="22.6" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="61" height="34" field="PONTOSDEPODER" />
            </layout>
            <layout left="377" top="405" width="61" height="33" >
                <edit transparent="true" fontSize="22.6" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="61" height="34" field="PONTOSHEROICOS" />
            </layout>
            <layout left="62" top="486" width="80" height="30">
                <edit transparent="true" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="FOR" /> <dataLink fields="{'FOR'}" defaultValues="{'0'}"/>
		                <label visible="false" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="FORtotal" /> 
				<edit transparent="true" fontSize="12" fontColor="#85bbb1" hint="Insira aqui valores que não somarão Pontos de Poder" horzTextAlign="center" left="49" top="5" width="20" height="20" field="varFORvalor"/> <dataLink fields="{'varFORvalor'}" defaultValues="{'0'}"/>
				<label fontSize="12" fontColor="#264d43" fontStyle="bold" horzTextAlign="center" left="49" top="6" width="20" height="20" field="varFOR"/> <dataLink fields="{'varFOR'}" defaultValues="{'0'}"/>
				<label fontSize="8" fontColor="#264d43" fontStyle="bold" text="BÔNUS" horzTextAlign="center" left="46" top="0" width="22" height="20"/>
			</layout>
			
			<dataLink fields="{'varFOR', 'varFORvalor'}">
				<event name="onChange">
					local bonus = tonumber(sheet.varFORvalor or 0);								
					sheet.varFOR = bonus;	
				
					if bonus >= 0 then
						sheet.varFOR = "+" .. bonus;
					else	
						sheet.varFOR = bonus;
					end;						
				</event>
			</dataLink>
			
		   <button left="39" top="450" width="99" height="36" text="">
					<image align="top" margins="{top=-1}" width="100" height="40" src="images/Hab_FOR.png"/>
					<event name="onClick">
					local personagem = Firecast.getPersonagemDe(sheet);                                

					if (personagem ~= nil) then
						local mesa = personagem.mesa;

						if ((personagem.dono == mesa.meuJogador) or (mesa.meuJogador.isMestre)) then

							local rolagem = Firecast.interpretarRolagem(sheet.FORtotal); 

							if not rolagem.possuiAlgumDado then
								   rolagem = Firecast.interpretarRolagem("1d20"):concatenar(rolagem);
							end; 

							local mesaDoPersonagem = Firecast.getMesaDe(sheet);

							if mesaDoPersonagem ~= nil then
								   mesaDoPersonagem.activeChat:rolarDados(rolagem, "Força de " .. (sheet.CODINOME or "Herói"));
							end;
						end;
			end;     
					</event>
			</button>
		
			
            <layout left="162" top="486" width="80" height="30" >
                <edit transparent="true" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="AGI" /> <dataLink fields="{'AGI'}" defaultValues="{'0'}"/>
		                <label visible="false" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="AGItotal" /> 
				<edit transparent="true" fontSize="12" fontColor="#85bbb1" hint="Insira aqui valores que não somarão Pontos de Poder" horzTextAlign="center" left="49" top="5" width="20" height="20" field="varAGIvalor" /> <dataLink fields="{'varAGIvalor'}" defaultValues="{'0'}"/>
				<label fontSize="12" fontColor="#264d43" fontStyle="bold" horzTextAlign="center" left="49" top="6" width="20" height="20" field="varAGI" /> <dataLink fields="{'varAGI'}" defaultValues="{'0'}"/>
				<label fontSize="8" fontColor="#264d43" fontStyle="bold" text="BÔNUS" horzTextAlign="center" left="46" top="0" width="22" height="20"/>
			</layout>
			
			<dataLink fields="{'varAGI', 'varAGIvalor'}">
				<event name="onChange">
					local bonus = tonumber(sheet.varAGIvalor or 0);								
					sheet.varAGI = bonus;	
				
					if bonus >= 0 then
						sheet.varAGI = "+" .. bonus;
					else	
						sheet.varAGI = bonus;
					end;						
				</event>
			</dataLink>
			
		   <button left="139" top="450" width="99" height="36" text="">
					<image align="top" margins="{top=-1}" width="100" height="40" src="images/Hab_AGI.png"/>
					<event name="onClick">
					local personagem = Firecast.getPersonagemDe(sheet);                                

					if (personagem ~= nil) then
						local mesa = personagem.mesa;

						if ((personagem.dono == mesa.meuJogador) or (mesa.meuJogador.isMestre)) then

							local rolagem = Firecast.interpretarRolagem(sheet.AGItotal); 

							if not rolagem.possuiAlgumDado then
								   rolagem = Firecast.interpretarRolagem("1d20"):concatenar(rolagem);
							end; 

							local mesaDoPersonagem = Firecast.getMesaDe(sheet);

							if mesaDoPersonagem ~= nil then
								   mesaDoPersonagem.activeChat:rolarDados(rolagem, "Agilidade de " .. (sheet.CODINOME or "Herói"));
							end;
						end;
			end;     
					</event>
			</button>

            <layout left="263" top="486" width="80" height="30">
                <edit transparent="true" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="LUT" /> <dataLink fields="{'LUT'}" defaultValues="{'0'}"/>
		                <label visible="false" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="LUTtotal" /> 
				<edit transparent="true" fontSize="12" fontColor="#85bbb1" hint="Insira aqui valores que não somarão Pontos de Poder" horzTextAlign="center" left="49" top="5" width="20" height="20" field="varLUTvalor" /> <dataLink fields="{'varLUTvalor'}" defaultValues="{'0'}"/>
				<label fontSize="12" fontColor="#264d43" fontStyle="bold" horzTextAlign="center" left="49" top="6" width="20" height="20" field="varLUT" /> <dataLink fields="{'varLUT'}" defaultValues="{'0'}"/>
				<label fontSize="8" fontColor="#264d43" fontStyle="bold" text="BÔNUS" horzTextAlign="center" left="46" top="0" width="22" height="20"/>
			</layout>
			
			<dataLink fields="{'varLUT', 'varLUTvalor'}">
				<event name="onChange">
					local bonus = tonumber(sheet.varLUTvalor or 0);								
					sheet.varLUT = bonus;	
				
					if bonus >= 0 then
						sheet.varLUT = "+" .. bonus;
					else	
						sheet.varLUT = bonus;
					end;						
				</event>
			</dataLink>
			
		   <button left="239" top="450" width="99" height="36" text="">
					<image align="top" margins="{top=-1}" width="100" height="40" src="images/Hab_LUT.png"/>
					<event name="onClick">
					local personagem = Firecast.getPersonagemDe(sheet);                                

					if (personagem ~= nil) then
						local mesa = personagem.mesa;

						if ((personagem.dono == mesa.meuJogador) or (mesa.meuJogador.isMestre)) then

							local rolagem = Firecast.interpretarRolagem(sheet.LUTtotal); 

							if not rolagem.possuiAlgumDado then
								   rolagem = Firecast.interpretarRolagem("1d20"):concatenar(rolagem);
							end; 

							local mesaDoPersonagem = Firecast.getMesaDe(sheet);

							if mesaDoPersonagem ~= nil then
								   mesaDoPersonagem.activeChat:rolarDados(rolagem, "Luta de " .. (sheet.CODINOME or "Herói"));
							end;
						end;
			end;     
					</event>
			</button>

            <layout left="364" top="486" width="80" height="30">
                <edit transparent="true" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="PRO"/> <dataLink fields="{'PRO'}" defaultValues="{'0'}"/>
		                <label visible="false" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="PROtotal" /> 
				<edit transparent="true" fontSize="12" fontColor="#85bbb1" hint="Insira aqui valores que não somarão Pontos de Poder" horzTextAlign="center" left="49" top="5" width="20" height="20" field="varPROvalor" /> <dataLink fields="{'varPROvalor'}" defaultValues="{'0'}"/>
				<label fontSize="12" fontColor="#264d43" fontStyle="bold" horzTextAlign="center" left="49" top="6" width="20" height="20" field="varPRO" /> <dataLink fields="{'varPRO'}" defaultValues="{'0'}"/>
				<label fontSize="8" fontColor="#264d43" fontStyle="bold" text="BÔNUS" horzTextAlign="center" left="46" top="0" width="22" height="20"/>
			</layout>
			
			<dataLink fields="{'varPRO', 'varPROvalor'}">
				<event name="onChange">
					local bonus = tonumber(sheet.varPROvalor or 0);								
					sheet.varPRO = bonus;	
				
					if bonus >= 0 then
						sheet.varPRO = "+" .. bonus;
					else	
						sheet.varPRO = bonus;
					end;						
				</event>
			</dataLink>
			
		   <button left="339" top="450" width="99" height="36" text="">
					<image align="top" margins="{top=-1}" width="100" height="40" src="images/Hab_PRO.png"/>
					<event name="onClick">
					local personagem = Firecast.getPersonagemDe(sheet);                                

					if (personagem ~= nil) then
						local mesa = personagem.mesa;

						if ((personagem.dono == mesa.meuJogador) or (mesa.meuJogador.isMestre)) then

							local rolagem = Firecast.interpretarRolagem(sheet.PROtotal); 

							if not rolagem.possuiAlgumDado then
								   rolagem = Firecast.interpretarRolagem("1d20"):concatenar(rolagem);
							end; 

							local mesaDoPersonagem = Firecast.getMesaDe(sheet);

							if mesaDoPersonagem ~= nil then
								   mesaDoPersonagem.activeChat:rolarDados(rolagem, "Prontidão de " .. (sheet.CODINOME or "Herói"));
							end;
						end;
			end;     
					</event>
			</button>

            <layout left="63" top="557" width="80" height="30">
                <edit transparent="true" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="VIG" /> <dataLink fields="{'VIG'}" defaultValues="{'0'}"/>
		                <label visible="false" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="VIGtotal" /> 
				<edit transparent="true" fontSize="12" fontColor="#85bbb1" hint="Insira aqui valores que não somarão Pontos de Poder" horzTextAlign="center" left="49" top="5" width="20" height="20" field="varVIGvalor" /> <dataLink fields="{'varVIGvalor'}" defaultValues="{'0'}"/>
				<label fontSize="12" fontColor="#264d43" fontStyle="bold" horzTextAlign="center" left="49" top="6" width="20" height="20" field="varVIG" /> <dataLink fields="{'varVIG'}" defaultValues="{'0'}"/>
				<label fontSize="8" fontColor="#264d43" fontStyle="bold" text="BÔNUS" horzTextAlign="center" left="46" top="0" width="22" height="20"/>
			</layout>
			
			<dataLink fields="{'varVIG', 'varVIGvalor'}">
				<event name="onChange">
					local bonus = tonumber(sheet.varVIGvalor or 0);								
					sheet.varVIG = bonus;	
				
					if bonus >= 0 then
						sheet.varVIG = "+" .. bonus;
					else	
						sheet.varVIG = bonus;
					end;						
				</event>
			</dataLink>
			
		   <button left="39" top="521" width="99" height="36" text="">
					<image align="top" margins="{top=-1}" width="100" height="40" src="images/Hab_VIG.png"/>
					<event name="onClick">
					local personagem = Firecast.getPersonagemDe(sheet);                                

					if (personagem ~= nil) then
						local mesa = personagem.mesa;

						if ((personagem.dono == mesa.meuJogador) or (mesa.meuJogador.isMestre)) then

							local rolagem = Firecast.interpretarRolagem(sheet.VIGtotal); 

							if not rolagem.possuiAlgumDado then
								   rolagem = Firecast.interpretarRolagem("1d20"):concatenar(rolagem);
							end; 

							local mesaDoPersonagem = Firecast.getMesaDe(sheet);

							if mesaDoPersonagem ~= nil then
								   mesaDoPersonagem.activeChat:rolarDados(rolagem, "Vigor de " .. (sheet.CODINOME or "Herói"));
							end;
						end;
			end;     
					</event>
			</button>

            <layout left="162" top="557" width="80" height="30" >
                <edit transparent="true" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="DES"/> <dataLink fields="{'DES'}" defaultValues="{'0'}"/>
		                <label visible="false" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="DEStotal" /> 
				<edit transparent="true" fontSize="12" fontColor="#85bbb1" hint="Insira aqui valores que não somarão Pontos de Poder" horzTextAlign="center" left="49" top="5" width="20" height="20" field="varDESvalor" /> <dataLink fields="{'varDESvalor'}" defaultValues="{'0'}"/>
				<label fontSize="12" fontColor="#264d43" fontStyle="bold" horzTextAlign="center" left="49" top="6" width="20" height="20" field="varDES" /> <dataLink fields="{'varDES'}" defaultValues="{'0'}"/>
				<label fontSize="8" fontColor="#264d43" fontStyle="bold" text="BÔNUS" horzTextAlign="center" left="46" top="0" width="22" height="20"/>
			</layout>
			
			<dataLink fields="{'varDES', 'varDESvalor'}">
				<event name="onChange">
					local bonus = tonumber(sheet.varDESvalor or 0);								
					sheet.varDES = bonus;	
				
					if bonus >= 0 then
						sheet.varDES = "+" .. bonus;
					else	
						sheet.varDES = bonus;
					end;						
				</event>
			</dataLink>
			
			
		   <button left="139" top="521" width="99" height="36" text="">
					<image align="top" margins="{top=-1}" width="100" height="40" src="images/Hab_DES.png"/>
					<event name="onClick">
					local personagem = Firecast.getPersonagemDe(sheet);                                

					if (personagem ~= nil) then
						local mesa = personagem.mesa;

						if ((personagem.dono == mesa.meuJogador) or (mesa.meuJogador.isMestre)) then

							local rolagem = Firecast.interpretarRolagem(sheet.DEStotal); 

							if not rolagem.possuiAlgumDado then
								   rolagem = Firecast.interpretarRolagem("1d20"):concatenar(rolagem);
							end; 

							local mesaDoPersonagem = Firecast.getMesaDe(sheet);

							if mesaDoPersonagem ~= nil then
								   mesaDoPersonagem.activeChat:rolarDados(rolagem, "Destreza de " .. (sheet.CODINOME or "Herói"));
							end;
						end;
			end;     
					</event>
			</button>

            <layout left="262" top="557" width="80" height="30">
                <edit transparent="true" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="INT"/> <dataLink fields="{'INT'}" defaultValues="{'0'}"/>
		                <label visible="false" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="INTtotal" /> 
				<edit transparent="true" fontSize="12" fontColor="#85bbb1" hint="Insira aqui valores que não somarão Pontos de Poder" horzTextAlign="center" left="49" top="5" width="20" height="20" field="varINTvalor" /> <dataLink fields="{'varINTvalor'}" defaultValues="{'0'}"/>
				<label fontSize="12" fontColor="#264d43" fontStyle="bold" horzTextAlign="center" left="49" top="6" width="20" height="20" field="varINT" /> <dataLink fields="{'varINT'}" defaultValues="{'0'}"/>
				<label fontSize="8" fontColor="#264d43" fontStyle="bold" text="BÔNUS" horzTextAlign="center" left="46" top="0" width="22" height="20"/>
			</layout>
			
			<dataLink fields="{'varINT', 'varINTvalor'}">
				<event name="onChange">
					local bonus = tonumber(sheet.varINTvalor or 0);								
					sheet.varINT = bonus;	
				
					if bonus >= 0 then
						sheet.varINT = "+" .. bonus;
					else	
						sheet.varINT = bonus;
					end;						
				</event>
			</dataLink>
			
			
		   <button left="239" top="521" width="99" height="36" text="">
					<image align="top" margins="{top=-1}" width="100" height="40" src="images/Hab_INT.png"/>
					<event name="onClick">
					local personagem = Firecast.getPersonagemDe(sheet);                                

					if (personagem ~= nil) then
						local mesa = personagem.mesa;

						if ((personagem.dono == mesa.meuJogador) or (mesa.meuJogador.isMestre)) then

							local rolagem = Firecast.interpretarRolagem(sheet.INTtotal); 

							if not rolagem.possuiAlgumDado then
								   rolagem = Firecast.interpretarRolagem("1d20"):concatenar(rolagem);
							end; 

							local mesaDoPersonagem = Firecast.getMesaDe(sheet);

							if mesaDoPersonagem ~= nil then
								   mesaDoPersonagem.activeChat:rolarDados(rolagem, "Intelecto de " .. (sheet.CODINOME or "Herói"));
							end;
						end;
			end;     
					</event>
			</button>

            <layout left="364" top="557" width="80" height="30" >
                <edit transparent="true" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="PRE" /> <dataLink fields="{'PRE'}" defaultValues="{'0'}"/>
		                <label visible="false" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="52" height="31" field="PREtotal" /> 
				<edit transparent="true" fontSize="12" fontColor="#85bbb1" hint="Insira aqui valores que não somarão Pontos de Poder" horzTextAlign="center" left="49" top="5" width="20" height="20" field="varPREvalor" /> <dataLink fields="{'varPREvalor'}" defaultValues="{'0'}"/>
				<label fontSize="12" fontColor="#264d43" fontStyle="bold" horzTextAlign="center" left="49" top="6" width="20" height="20" field="varPRE" /> <dataLink fields="{'varPRE'}" defaultValues="{'0'}"/>
				<label fontSize="8" fontColor="#264d43" fontStyle="bold" text="BÔNUS" horzTextAlign="center" left="46" top="0" width="22" height="20"/>
			</layout>
			
			<dataLink fields="{'varPRE', 'varPREvalor'}">
				<event name="onChange">
					local bonus = tonumber(sheet.varPREvalor or 0);								
					sheet.varPRE = bonus;	
				
					if bonus >= 0 then
						sheet.varPRE = "+" .. bonus;
					else	
						sheet.varPRE = bonus;
					end;						
				</event>
			</dataLink>
			
			
		   <button left="339" top="521" width="99" height="36" text="">
					<image align="top" margins="{top=-1}" width="100" height="40" src="images/Hab_PRE.png"/>
					<event name="onClick">
					local personagem = Firecast.getPersonagemDe(sheet);                                

					if (personagem ~= nil) then
						local mesa = personagem.mesa;

						if ((personagem.dono == mesa.meuJogador) or (mesa.meuJogador.isMestre)) then

							local rolagem = Firecast.interpretarRolagem(sheet.PREtotal); 

							if not rolagem.possuiAlgumDado then
								   rolagem = Firecast.interpretarRolagem("1d20"):concatenar(rolagem);
							end; 

							local mesaDoPersonagem = Firecast.getMesaDe(sheet);

							if mesaDoPersonagem ~= nil then
								   mesaDoPersonagem.activeChat:rolarDados(rolagem, "Presença de " .. (sheet.CODINOME or "Herói"));
							end;
						end;
			end;     
					</event>
			</button>
    
		
<!-- VANTAGENS AUTOMÁTICAS	 -->

		<label vertTextAlign="center" horzTextAlign="center" fontColor="#bedbd5" text="TOTAL" left="395" top="596" width="30" height="29" />
		
		<edit transparent="true" vertTextAlign="center" horzTextAlign="center" fontColor="#bedbd5" left="395" top="607" width="35" height="20" field="TotalppVantagem"/> <dataLink fields="{'TotalppVantagem'}" defaultValues="{'0'}"/>
			
		<button left="287" top="598" height="24" text="Nova Vantagem" fontSize="12" width="100"
                onClick="self.rclVantagens:append();"/>
				
		<layout left="40" top="646" width="398" height="250">
		<scrollBox left="0" top="0" width="398" height="250">
		   <recordList name="rclVantagens" field="dVantagens" templateForm="frmFichaMM3eVantagens_svg"
						left="0" top="0" width="400" autoHeight="true">
							<event name="onCompare">
								return Utils.compareStringPtBr(nodeA.nomeVantagem, nodeB.nomeVantagem);
							</event>
			</recordList>
		</scrollBox>		
		</layout>
		
<!-- ATAQUES DINÂMICOS -->

		<button left="720" top="214" height="24" text="Novo Ataque" fontSize="12" width="100"
                onClick="self.rclAtaques:append();"/>
		
		<layout top="280" left="456" width="402" height="150">
		
		<scrollBox left="0" top="0" width="402" height="150">
			
		   <recordList name="rclAtaques" field="dAtaques" templateForm="frmFichaMM3eAtaques_svg"
						left="0" top="0" width="400" autoHeight="true">
							<event name="onCompare">
								return Utils.compareStringPtBr(nodeA.ATK, nodeB.ATK);
							</event>
			</recordList>
		</scrollBox>		
		</layout>
		
<!-- INICIATIVA -->
            <layout left="688" top="239" width="28" height="16" >
                <edit transparent="true" fontSize="12" fontColor="#000000" fontStyle="bold" vertTextAlign="center" left="0" top="0" width="28" height="19" field="Iniciativa" />
            </layout>
			
		   <button left="590" top="239" width="89" height="21" text="INICIATIVA">
					<event name="onClick">
					local personagem = Firecast.getPersonagemDe(sheet);                                

					if (personagem ~= nil) then
						local mesa = personagem.mesa;

						if ((personagem.dono == mesa.meuJogador) or (mesa.meuJogador.isMestre)) then

							local rolagem = Firecast.interpretarRolagem(sheet.Iniciativa); 

							if not rolagem.possuiAlgumDado then
								   rolagem = Firecast.interpretarRolagem("1d20"):concatenar(rolagem);
							end; 

							local mesaDoPersonagem = Firecast.getMesaDe(sheet);

							if mesaDoPersonagem ~= nil then
								   mesaDoPersonagem.activeChat:rolarDados(rolagem, "Iniciativa de " .. (sheet.CODINOME or "Herói") );
							end;
						end;
			end;     
					</event>
			</button>
<!-- FIM DA INICIATIVA -->
			
			
            <layout left="43" top="933" width="391" height="302">
                <textEditor left="0" top="0" width="391" height="302" fontSize="16.5" fontColor="#000000" field="Equipamentos" transparent="true"/> <dataLink fields="{'Equipamentos'}" defaultValues="{'Equipamentos\n ✲ Nome do Equipamento ● custo final \n\n ✲ Nome do Equipamento ● custo final\n\n ✲ Nome do Equipamento ● custo final\n\n ✲ Nome do Equipamento ● custo final '}"/>
            </layout>

            <layout left="541" top="78" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFesq1"/>
            </layout>
            <layout left="568" top="78" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFesq2"/> <dataLink fields="{'DEFesq2'}" defaultValues="{'0'}"/>
            </layout>
            <layout left="595" top="78" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFesq3"/> <dataLink fields="{'DEFesq3'}" defaultValues="{'0'}"/>
            </layout>
            <layout left="621" top="78" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFesqTotal"/>
            </layout>


            <layout left="541" top="99" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFapa1"/>
            </layout>
            <layout left="568" top="99" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFapa2"/> <dataLink fields="{'DEFapa2'}" defaultValues="{'0'}"/>
            </layout>
            <layout left="595" top="99" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFapa3"/> <dataLink fields="{'DEFapa3'}" defaultValues="{'0'}"/>
            </layout>
            <layout left="621" top="99" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFapaTotal"/>
            </layout>

            <layout left="541" top="120" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFvon1"/>
            </layout>
            <layout left="568" top="120" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFvon2"/> <dataLink fields="{'DEFvon2'}" defaultValues="{'0'}"/>
            </layout>
            <layout left="595" top="120" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFvon3"/> <dataLink fields="{'DEFvon3'}" defaultValues="{'0'}"/>
            </layout>
            <layout left="621" top="120" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFvonTotal"/>
            </layout>


            <layout left="750" top="78" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFforti1"/>
            </layout>
            <layout left="777" top="78" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFforti2"/> <dataLink fields="{'DEFforti2'}" defaultValues="{'0'}"/>
            </layout>
            <layout left="804" top="78" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFforti3"/> <dataLink fields="{'DEFforti3'}" defaultValues="{'0'}"/>
            </layout>
            <layout left="831" top="78" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFfortiTotal"/>
            </layout>

            <layout left="750" top="99" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFres1"/>
            </layout>
            <layout left="777" top="99" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFres2"/> <dataLink fields="{'DEFres2'}" defaultValues="{'0'}"/>
            </layout>
            <layout left="804" top="99" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFres3"/> <dataLink fields="{'DEFres3'}" defaultValues="{'0'}"/>
            </layout>
            <layout left="831" top="99" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFresTotal"/>
            </layout>

            <layout left="650" top="117" width="98" height="24">
                <edit transparent="true" fontSize="14" fontColor="#000000" fontStyle="bold" vertTextAlign="center" left="0" top="0" width="182" height="24" field="DEFextraName"/>
            </layout>
            <layout left="750" top="120" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFextra1"/>
            </layout>
            <layout left="777" top="120" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFextra2"/> <dataLink fields="{'DEFextra2'}" defaultValues="{'0'}"/>
            </layout>
            <layout left="804" top="120" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFextra3"/> <dataLink fields="{'DEFextra3'}" defaultValues="{'0'}"/>
            </layout>
            <layout left="831" top="120" width="24" height="15">
                <edit transparent="true" fontSize="9" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="16" field="DEFextraTotal"/>
            </layout>
			
            <layout left="456" top="173" width="115" height="50">
                <edit transparent="true" fontSize="18" fontStyle="bold" fontColor="#591f1d" horzTextAlign="center" left="0" top="0" width="115" height="30" type="number" field="PenaRes"/>
				<label visible="false" field="PenalidadeRes" />
            </layout>
			
			<dataLink fields="{'PenaRes'}">
				<event name="onChange">
					if sheet.PenaRes ~= nil then
						if sheet.PenaRes >= 0 then
							sheet.PenaRes = 0 - (tonumber(sheet.PenaRes));
						end;						
					end;
				</event>
			</dataLink>
			
            <layout left="578" top="173" width="277" height="40">
                <textEditor transparent="true" fontSize="14" fontColor="#591f1d" left="0" top="0" width="277" height="34" field="Condicoes"/>
            </layout>


            <layout left="540" top="1196" width="19" height="18">
                <label fontSize="10" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="15" field="PPhabilidades"/>
            </layout>
            <layout left="618" top="1196" width="21" height="18">
                <label fontSize="10" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="15" field="PPpericias"/>
            </layout>
            <layout left="641" top="1197" width="19" height="14">
                <label fontSize="9" fontColor="#000000" vertTextAlign="center" left="0" top="0" width="19" height="15" field="PPpericiasgrad"/>
            </layout>
            <layout left="811" top="1194" width="21" height="18">
                <edit transparent="true" fontSize="10" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="18" field="PPvantagens"/>
				    <dataLink fields="'TotalppVantagem'">
						<event name="onChange">
						   sheet.PPvantagens = (tonumber(sheet.TotalppVantagem) or 0);
						</event>
					</dataLink>
			
            </layout>
            <layout left="512" top="1212" width="21" height="14">
                <edit transparent="TRUE" fontSize="10" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="24" height="18" field="PPdefesas"/>
            </layout>
            <layout left="593" top="1212" width="24" height="18">
                <edit transparent="true" fontSize="10" fontColor="#000000" vertTextAlign="center" left="0" top="0" width="24" height="18" field="PPpoderes"/>
            </layout>
            <layout left="630" top="1214" width="140" height="18">
                <label fontSize="12" fontColor="#000000" fontStyle="bold" vertTextAlign="center" left="0" top="0" width="140" height="18" field="PPsomatotal"/>
            </layout>
			<rectangle left="254" top="26" width="184" height="245" color="#6cb098" strokeColor="white" strokeSize="1"/>
			<image left="255" top="27" width="182" height="243" field="avatar" editable="true" style="autoFit" animate="true">
				<event name="OnStartDrag">
					drag:addData("imageURL", sheet.avatar);
				</event>
			</image>
		
            <layout left="40" top="373" width="78" height="30">
                <edit transparent="true" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="78" height="31" field="IDADE"/>
            </layout>
            <layout left="120" top="373" width="78" height="30">
                <edit transparent="true" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="78" height="31" field="ALTURA"/>
            </layout>
            <layout left="202" top="373" width="78" height="30">
                <edit transparent="true" fontSize="20.3" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="78" height="31" field="PESO"/>
            </layout>
			<layout left="117" top="216" width="202" height="35">
				<imageCheckBox field="CheckIDENTIDADE" checkedImage="images/PUBLICA.png" uncheckedImage="images/SECRETA.png" />
			</layout>
            <layout left="43" top="243" width="202" height="35">
                <edit transparent="true" fontSize="10" fontColor="#000000" horzTextAlign="center" left="0" top="0" width="202" height="36" field="ALIAS" hint="Notas sobre a Identidade. "/>
            </layout>

<dataLink fields="'FOR', 'VIG', 'AGI', 'DES', 'LUT', 'INT', 'PRO', 'PRE', 'varFORvalor', 'varVIGvalor', 'varAGIvalor', 'varDESvalor', 'varLUTvalor', 'varINTvalor', 'varPROvalor', 'varPREvalor'">
        <event name="onChange">
               sheet.DEFesq1 = (tonumber(sheet.AGI) or 0) + (tonumber(sheet.varAGIvalor) or 0);
               sheet.DEFapa1 = (tonumber(sheet.LUT) or 0) + (tonumber(sheet.varLUTvalor) or 0);
               sheet.DEFvon1 = (tonumber(sheet.PRO) or 0) + (tonumber(sheet.varPROvalor) or 0);
               sheet.DEFforti1 = (tonumber(sheet.VIG) or 0) + (tonumber(sheet.varVIGvalor) or 0);
               sheet.DEFres1 = (tonumber(sheet.VIG) or 0) + (tonumber(sheet.varVIGvalor) or 0);
        </event>
</dataLink>

<dataLink fields="'FOR', 'VIG', 'AGI', 'DES', 'LUT', 'INT', 'PRO', 'PRE', 'varFORvalor', 'varVIGvalor', 'varAGIvalor', 'varDESvalor', 'varLUTvalor', 'varINTvalor', 'varPROvalor', 'varPREvalor'">
        <event name="onChange">
               sheet.FORtotal = (tonumber(sheet.FOR) or 0) + (tonumber(sheet.varFORvalor) or 0);
               sheet.VIGtotal = (tonumber(sheet.VIG) or 0) + (tonumber(sheet.varVIGvalor) or 0);
			   sheet.AGItotal = (tonumber(sheet.AGI) or 0) + (tonumber(sheet.varAGIvalor) or 0);
			   sheet.DEStotal = (tonumber(sheet.DES) or 0) + (tonumber(sheet.varDESvalor) or 0);
               sheet.LUTtotal = (tonumber(sheet.LUT) or 0) + (tonumber(sheet.varLUTvalor) or 0);
               sheet.INTtotal = (tonumber(sheet.INT) or 0) + (tonumber(sheet.varINTvalor) or 0);
               sheet.PROtotal = (tonumber(sheet.PRO) or 0) + (tonumber(sheet.varPROvalor) or 0);
               sheet.PREtotal = (tonumber(sheet.PRE) or 0) + (tonumber(sheet.varPREvalor) or 0);
			   
        </event>
</dataLink>

<dataLink fields="'DEFesq1', 'DEFesq2', 'DEFesq3'">
        <event name="onChange">
               sheet.DEFesqTotal = (tonumber(sheet.DEFesq1) or 0) + (tonumber(sheet.DEFesq2) or 0) + (tonumber(sheet.DEFesq3) or 0);
        </event>
</dataLink>


<dataLink fields="'DEFapa1', 'DEFapa2', 'DEFapa3'">
        <event name="onChange">
               sheet.DEFapaTotal = (tonumber(sheet.DEFapa1) or 0) + (tonumber(sheet.DEFapa2) or 0) + (tonumber(sheet.DEFapa3) or 0);
        </event>
</dataLink>


<dataLink fields="'DEFvon1', 'DEFvon2', 'DEFvon3'">
        <event name="onChange">
               sheet.DEFvonTotal = (tonumber(sheet.DEFvon1) or 0) + (tonumber(sheet.DEFvon2) or 0) + (tonumber(sheet.DEFvon3) or 0);
        </event>
</dataLink>


<dataLink fields="'DEFforti1', 'DEFforti2', 'DEFforti3'">
        <event name="onChange">
               sheet.DEFfortiTotal = (tonumber(sheet.DEFforti1) or 0) + (tonumber(sheet.DEFforti2) or 0) + (tonumber(sheet.DEFforti3) or 0);
        </event>
</dataLink>


<dataLink fields="'DEFres1', 'DEFres2', 'DEFres3'">
        <event name="onChange">
               sheet.DEFresTotal = (tonumber(sheet.DEFres1) or 0) + (tonumber(sheet.DEFres2) or 0) + (tonumber(sheet.DEFres3) or 0);
        </event>
</dataLink>


<dataLink fields="'DEFextra1', 'DEFextra2', 'DEFextra3'">
        <event name="onChange">
               sheet.DEFextraTotal = (tonumber(sheet.DEFextra1) or 0) + (tonumber(sheet.DEFextra2) or 0) + (tonumber(sheet.DEFextra3) or 0);
        </event>
</dataLink>



       <button left="454" top="74" width="85" height="22" text="ESQUIVAR">
                <event name="onClick">
                local personagem = Firecast.getPersonagemDe(sheet);                                

                if (personagem ~= nil) then
                    local mesa = personagem.mesa;

                    if ((personagem.dono == mesa.meuJogador) or (mesa.meuJogador.isMestre)) then

                        local rolagem = Firecast.interpretarRolagem(sheet.DEFesqTOTAL); 

                        if not rolagem.possuiAlgumDado then
                               rolagem = Firecast.interpretarRolagem("1d20"):concatenar(rolagem);
                        end; 

                        local mesaDoPersonagem = Firecast.getMesaDe(sheet);

                        if mesaDoPersonagem ~= nil then
                               mesaDoPersonagem.activeChat:rolarDados(rolagem, "Esquivar de " .. (sheet.CODINOME or "Herói"));
                        end;
                    end;
		end;     
                </event>
	    </button>

       <button left="454" top="96" width="85" height="22" text="APARAR">
                <event name="onClick">
                local personagem = Firecast.getPersonagemDe(sheet);                                

                if (personagem ~= nil) then
                    local mesa = personagem.mesa;

                    if ((personagem.dono == mesa.meuJogador) or (mesa.meuJogador.isMestre)) then

                        local rolagem = Firecast.interpretarRolagem(sheet.DEFapaTOTAL); 

                        if not rolagem.possuiAlgumDado then
                               rolagem = Firecast.interpretarRolagem("1d20"):concatenar(rolagem);
                        end; 

                        local mesaDoPersonagem = Firecast.getMesaDe(sheet);

                        if mesaDoPersonagem ~= nil then
                               mesaDoPersonagem.activeChat:rolarDados(rolagem, "Aparar de " .. (sheet.CODINOME or "Herói"));
                        end;
                    end;
		end;     
                </event>
	    </button>

       <button left="454" top="118" width="85" height="22" text="VONTADE">
                <event name="onClick">
                local personagem = Firecast.getPersonagemDe(sheet);                                

                if (personagem ~= nil) then
                    local mesa = personagem.mesa;

                    if ((personagem.dono == mesa.meuJogador) or (mesa.meuJogador.isMestre)) then

                        local rolagem = Firecast.interpretarRolagem(sheet.DEFvonTOTAL); 

                        if not rolagem.possuiAlgumDado then
                               rolagem = Firecast.interpretarRolagem("1d20"):concatenar(rolagem);
                        end; 

                        local mesaDoPersonagem = Firecast.getMesaDe(sheet);

                        if mesaDoPersonagem ~= nil then
                               mesaDoPersonagem.activeChat:rolarDados(rolagem, "Vontade de " .. (sheet.CODINOME or "Herói"));
                        end;
                    end;
		end;     
                </event>
	    </button>

       <button left="651" top="74" width="98" height="22" text="FORTITUDE">
                <event name="onClick">
                local personagem = Firecast.getPersonagemDe(sheet);                                

                if (personagem ~= nil) then
                    local mesa = personagem.mesa;

                    if ((personagem.dono == mesa.meuJogador) or (mesa.meuJogador.isMestre)) then

                        local rolagem = Firecast.interpretarRolagem(sheet.DEFfortiTOTAL); 

                        if not rolagem.possuiAlgumDado then
                               rolagem = Firecast.interpretarRolagem("1d20"):concatenar(rolagem);
                        end; 

                        local mesaDoPersonagem = Firecast.getMesaDe(sheet);

                        if mesaDoPersonagem ~= nil then
                               mesaDoPersonagem.activeChat:rolarDados(rolagem, "Fortitude de " .. (sheet.CODINOME or "Herói"));
                        end;
                    end;
		end;     
                </event>
	    </button>

       <button left="651" top="96" width="98" height="22" text="RESISTENCIA">
                <event name="onClick">
                local personagem = Firecast.getPersonagemDe(sheet);                                

                if (personagem ~= nil) then
                    local mesa = personagem.mesa;

                    if ((personagem.dono == mesa.meuJogador) or (mesa.meuJogador.isMestre)) then

                        local rolagem = Firecast.interpretarRolagem(sheet.DEFresTOTAL); 
						local penalidade = Firecast.interpretarRolagem(sheet.PenaRes); 

                        if not rolagem.possuiAlgumDado then
                               rolagem = Firecast.interpretarRolagem("1d20"):concatenar(rolagem):concatenar(penalidade);
                        end; 

                        local mesaDoPersonagem = Firecast.getMesaDe(sheet);

                        if mesaDoPersonagem ~= nil then
								if sheet.PenaRes ~= nil then
									mesaDoPersonagem.activeChat:rolarDados(rolagem, "Resistência de " .. (sheet.CODINOME or "Herói") .. " com penalidade de " .. (sheet.PenaRes));
								else
									mesaDoPersonagem.activeChat:rolarDados(rolagem, "Resistência de " .. (sheet.CODINOME or "Herói"));
								end;
                        end;
                    end;
		end;     
                </event>
	    </button>




	    <dataLink fields="{'FOR', 'VIG', 'AGI', 'DES', 'LUT', 'INT', 'PRO', 'PRE'}">
                <event name="onChange">
					
					if sheet.HeroHigh then
						sheet.PPhabilidades = ((tonumber(sheet.FOR) or 0) + 1 +
											  (tonumber(sheet.VIG) or 0) + 1 +
											  (tonumber(sheet.AGI) or 0) + 1 +
											  (tonumber(sheet.DES) or 0) + 1 +
											  (tonumber(sheet.LUT) or 0) + 1 +
											  (tonumber(sheet.INT) or 0) + 1 +
											  (tonumber(sheet.PRO) or 0) + 1 +
											  (tonumber(sheet.PRE) or 0) + 1) * 2;  
					else
						sheet.PPhabilidades = ((tonumber(sheet.FOR) or 0) +
											  (tonumber(sheet.ppFOR) or 0) +
											  (tonumber(sheet.VIG) or 0) +
											  (tonumber(sheet.ppVIG) or 0) +
											  (tonumber(sheet.AGI) or 0) +
											  (tonumber(sheet.ppAGI) or 0) +
											  (tonumber(sheet.DES) or 0) +
											  (tonumber(sheet.ppDES) or 0) +
											  (tonumber(sheet.LUT) or 0) +
											  (tonumber(sheet.ppLUT) or 0) +
											  (tonumber(sheet.INT) or 0) +
											  (tonumber(sheet.ppINT) or 0) +
											  (tonumber(sheet.PRO) or 0) +
											  (tonumber(sheet.ppPRO) or 0) +
											  (tonumber(sheet.PRE) or 0) +
											  (tonumber(sheet.ppPRE) or 0)) * 2;                  
					end;
					
					if tonumber(sheet.FOR) ~= nil then
						sheet.ppFOR = 0;
					else
						sheet.ppFOR = -5;
					end;
					if tonumber(sheet.AGI) ~= nil then
						sheet.ppAGI = 0;
					else
						sheet.ppAGI = -5;
					end;
					if tonumber(sheet.LUT) ~= nil then
						sheet.ppLUT = 0;
					else
						sheet.ppLUT = -5;
					end;
					if tonumber(sheet.PRO) ~= nil then
						sheet.ppPRO = 0;
					else
						sheet.ppPRO = -5;
					end;
					if tonumber(sheet.VIG) ~= nil then
						sheet.ppVIG = 0;
					else
						sheet.ppVIG = -5;
					end;
					if tonumber(sheet.DES) ~= nil then
						sheet.ppDES = 0;
					else
						sheet.ppDES = -5;
					end;
					if tonumber(sheet.INT) ~= nil then
						sheet.ppINT = 0;
					else
						sheet.ppINT = -5;
					end;
					if tonumber(sheet.PRE) ~= nil then
						sheet.ppPRE = 0;
					else
						sheet.ppPRE = -5;
					end;
                </event>
	    </dataLink>

	    <dataLink field="PPpericias">
                <event name="onChange">
                    sheet.PPpericiasgrad = math.floor(sheet.PPpericias or 0) * 2;
                </event>
	    </dataLink>
		
		<dataLink field="pontosPericia">
				<event name="onChange">
					sheet.PPpericias = math.floor(sheet.pontosPericia or 0) ;
				</event>
		</dataLink>
		
		<dataLink fields="'DEFesq2', 'DEFapa2', 'DEFvon2', 'DEFforti2', 'DEFres2', 'DEFextra2'">
				<event name="onChange">
               sheet.PPdefesas = (tonumber(sheet.DEFesq2) or 0) +
								 (tonumber(sheet.DEFapa2) or 0) +
								 (tonumber(sheet.DEFvon2) or 0) +
								 (tonumber(sheet.DEFforti2) or 0) +
								 (tonumber(sheet.DEFres2) or 0) +
								 (tonumber(sheet.DEFextra2) or 0);
				</event>
		</dataLink>

	    <dataLink fields="{'PPhabilidades', 'PPpericias', 'PPvantagens', 'PPdefesas', 'PPpoderes'}">
                <event name="onChange">
                    sheet.PPsomatotal = (tonumber(sheet.PPhabilidades) or 0) +
                                        (tonumber(sheet.PPpericias) or 0) +
                                        (tonumber(sheet.PPvantagens) or 0) +
                                        (tonumber(sheet.PPdefesas) or 0) +
                                        (tonumber(sheet.PPpoderes) or 0);                  

                    if sheet.PPsomatotal >= 0 then
                        sheet.PPsomatotal = sheet.PPsomatotal .. " PONTOS DE PODER";
                    end;
                </event>
	    </dataLink>


		
        </rectangle>
    </scrollBox>
</form>
